# Supabase Setup Guide - Quick Reference

**Tạo:** 2025-12-14  
**Task:** 0.1.3 - Supabase Project Setup
**Mục đích:** Hướng dẫn nhanh setup Supabase cho dự án

---

## Bước 1: Tạo Supabase Account & Project

1. **Đăng ký/Đăng nhập:**
   - Truy cập: https://supabase.com
   - Click "Start your project"
   - Đăng ký bằng GitHub, Google, hoặc Email

2. **Tạo Project:**
   - Click "New Project"
   - Điền thông tin:
     - **Name:** `bio-affiliate` (hoặc tên bạn muốn)
     - **Database Password:** Tạo password mạnh (⚠️ **LƯU LẠI!**)
     - **Region:** Chọn gần bạn nhất (VD: `Southeast Asia (Singapore)`)
     - **Pricing Plan:** Free tier
   - Click "Create new project"
   - ⏳ Đợi 2-3 phút để project được tạo

---

## Bước 2: Lấy Credentials

1. **Vào Project Settings:**
   - Trong Supabase Dashboard, click vào project vừa tạo
   - Vào **Settings** (icon bánh răng) → **API**

2. **Copy các giá trị:**
   - **Project URL:** `https://xxxxx.supabase.co`
   - **anon/public key:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
   
   ⚠️ **Lưu ý:** 
   - `anon/public key` là safe để expose trong frontend
   - `service_role key` là SECRET - không bao giờ expose trong frontend!

---

## Bước 3: Tạo File .env

1. **Tạo file `.env` ở root project:**
   ```bash
   # Từ root directory
   touch .env
   ```

2. **Thêm credentials vào `.env`:**
   ```env
   VITE_SUPABASE_URL=https://xxxxx.supabase.co
   VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

3. **Verify `.env` không bị commit:**
   - Check `.gitignore` có dòng `.env`
   - ✅ Nếu có → OK
   - ❌ Nếu không → Thêm `.env` vào `.gitignore`

---

## Bước 4: Test Connection

1. **Start dev server:**
   ```bash
   npm run dev
   ```

2. **Mở test page:**
   - Navigate to: `http://localhost:3000/test-connection.html`
   - Click "Test Connection"
   - ✅ Nếu thành công → Connection OK!
   - ❌ Nếu lỗi → Check lại credentials

3. **Hoặc test trong console:**
   ```javascript
   // Trong browser console
   import { testSupabaseConnection } from './shared/test-supabase-connection.js';
   const result = await testSupabaseConnection();
   console.log(result);
   ```

---

## Troubleshooting

Xem chi tiết: `docs/implement/0.1.3-troubleshooting.md`

### ❌ "Missing environment variables"
- **Nguyên nhân:** File `.env` chưa được tạo hoặc không có credentials
- **Giải pháp:** 
  1. Tạo file `.env` ở root project
  2. Thêm `VITE_SUPABASE_URL` và `VITE_SUPABASE_ANON_KEY`
  3. Restart dev server: `npm run dev`

### ❌ "Failed to connect"
- **Nguyên nhân:** 
  - URL hoặc key sai
  - Network issue
  - Supabase project bị pause (free tier)
- **Giải pháp:**
  1. Verify credentials trong Supabase Dashboard
  2. Check network connection
  3. Verify project status trong Supabase Dashboard

### ❌ "Table doesn't exist"
- **Nguyên nhân:** Chưa tạo database tables
- **Giải pháp:** 
  - ✅ Đây là OK! Connection đã thành công
  - Tiếp tục với Task 0.1.4: Database Schema Setup

---

## Next Steps

Sau khi connection test thành công:

1. ✅ **Task 0.1.3:** Supabase Project Setup (Current)
2. ⏭️ **Task 0.1.4:** Database Schema Setup
   - Tạo 5 tables: `channels`, `categories`, `products`, `color_themes`, `bio_layouts`
   - Xem: `docs/database/0.1.4-migration-guide.md`
3. ⏭️ **Task 0.1.5:** Supabase Storage Setup
   - Tạo bucket `product-images`
   - Xem: `docs/database/0.1.5-storage-setup.md`

---

## Resources

- **Supabase Dashboard:** https://app.supabase.com
- **Supabase Docs:** https://supabase.com/docs
- **Setup Guide:** `docs/implement/setup.md`
- **Environment Variables:** `docs/implement/env.md`
- **Troubleshooting:** `docs/implement/0.1.3-troubleshooting.md`

---

**Kết thúc Supabase Setup Guide**

